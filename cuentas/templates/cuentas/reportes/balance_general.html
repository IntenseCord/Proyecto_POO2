{% extends 'base.html' %} {% block title %}Balance General{% endblock %} {%
block page_title %}Balance General{% endblock %} {% block extra_css %} {%
include 'cuentas/reportes/_estilos_reporte.html' with
btn_gradient='linear-gradient(135deg, #f093fb 0%, #f5576c 100%)'
hover_shadow='rgba(240, 147, 251, 0.3)' %}

<style>
  .balance-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 20px;
    margin-bottom: 20px;
  }

  @media (max-width: 768px) {
    .balance-grid {
      grid-template-columns: 1fr;
    }
  }

  .total-seccion {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    padding: 20px;
    border-radius: 8px;
    margin-top: 15px;
    display: flex;
    justify-content: space-between;
    align-items: center;
  }

  .ecuacion-contable {
    background: white;
    border-radius: 12px;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.08);
    padding: 30px;
    text-align: center;
  }

  .ecuacion-contable h3 {
    color: #2c3e50;
    margin-bottom: 20px;
  }

  .ecuacion {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 20px;
    flex-wrap: wrap;
    font-size: 18px;
    font-weight: 600;
    color: #2c3e50;
  }

  .ecuacion-item {
    padding: 15px 25px;
    background: #f8f9fa;
    border-radius: 8px;
  }

  .ecuacion-item.activos {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
  }

  .ecuacion-item.pasivos {
    background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
    color: white;
  }

  .ecuacion-item.patrimonio {
    background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
    color: white;
  }
</style>
{% endblock %} {% block content %} {% include
'cuentas/reportes/_filtros_reporte.html' with btn_icon='fa-file-invoice-dollar'
btn_text='Generar Reporte' %} {% if reporte %} {% include
'cuentas/reportes/_encabezado_reporte.html' with titulo='Balance General (Estado
de Situación Financiera)' %}

<div class="balance-grid">
  <!-- Activos -->
  <div class="seccion-reporte">
    <h3><i class="fas fa-coins" style="color: #667eea"></i> Activos</h3>
    {% include 'cuentas/reportes/_lista_cuentas.html' with
    cuentas=reporte.activos mensaje_vacio='No hay activos registrados' %}

    <div class="total-seccion">
      <span><strong>Total Activos</strong></span>
      <span style="font-size: 24px"
        ><strong>${{ reporte.totales.activos|floatformat:2 }}</strong></span
      >
    </div>
  </div>

  <!-- Pasivos y Patrimonio -->
  <div>
    <!-- Pasivos -->
    <div class="seccion-reporte" style="margin-bottom: 20px">
      <h3>
        <i class="fas fa-file-invoice" style="color: #f5576c"></i> Pasivos
      </h3>
      {% include 'cuentas/reportes/_lista_cuentas.html' with
      cuentas=reporte.pasivos mensaje_vacio='No hay pasivos registrados'
      mostrar_total=True label_total='Total Pasivos'
      valor_total=reporte.totales.pasivos %}
    </div>

    <!-- Patrimonio -->
    <div class="seccion-reporte">
      <h3><i class="fas fa-landmark" style="color: #38ef7d"></i> Patrimonio</h3>
      {% include 'cuentas/reportes/_lista_cuentas.html' with
      cuentas=reporte.patrimonios mensaje_vacio='No hay patrimonio registrado'
      %} {% if reporte.utilidad_periodo != 0 %}
      <div
        class="cuenta-item"
        style="
          background: #f8f9fa;
          padding: 10px;
          border-radius: 8px;
          margin-top: 10px;
        "
      >
        <div>
          <span class="cuenta-nombre">
            {% if reporte.utilidad_periodo > 0 %}
            <i class="fas fa-plus-circle" style="color: #38ef7d"></i> Utilidad
            del Período {% else %}
            <i class="fas fa-minus-circle" style="color: #f5576c"></i> Pérdida
            del Período {% endif %}
          </span>
        </div>
        <span class="cuenta-monto"
          >${{ reporte.utilidad_periodo|floatformat:2 }}</span
        >
      </div>
      {% endif %}

      <div class="subtotal">
        <span>Total Patrimonio</span>
        <span
          >${{ reporte.totales.patrimonio_con_utilidad|floatformat:2 }}</span
        >
      </div>
    </div>

    <!-- Total Pasivo + Patrimonio -->
    <div class="total-seccion" style="margin-top: 20px">
      <span><strong>Total Pasivo + Patrimonio</strong></span>
      <span style="font-size: 24px"
        ><strong
          >${{ reporte.totales.pasivo_patrimonio|floatformat:2 }}</strong
        ></span
      >
    </div>
  </div>
</div>

<!-- Ecuación Contable -->
<div class="ecuacion-contable">
  <h3><i class="fas fa-equals"></i> Ecuación Contable</h3>
  <div class="ecuacion">
    <div class="ecuacion-item activos">
      <div style="font-size: 14px; opacity: 0.9">Activos</div>
      <div style="font-size: 24px">
        ${{ reporte.totales.activos|floatformat:2 }}
      </div>
    </div>

    <div style="font-size: 32px; color: #2c3e50">=</div>

    <div class="ecuacion-item pasivos">
      <div style="font-size: 14px; opacity: 0.9">Pasivos</div>
      <div style="font-size: 24px">
        ${{ reporte.totales.pasivos|floatformat:2 }}
      </div>
    </div>

    <div style="font-size: 32px; color: #2c3e50">+</div>

    <div class="ecuacion-item patrimonio">
      <div style="font-size: 14px; opacity: 0.9">Patrimonio</div>
      <div style="font-size: 24px">
        ${{ reporte.totales.patrimonio_con_utilidad|floatformat:2 }}
      </div>
    </div>
  </div>

  {% if reporte.ecuacion_balanceada %}
  <div class="alert-success" style="margin-top: 20px">
    <i class="fas fa-check-circle"></i>
    <strong>Ecuación Contable Balanceada</strong><br />
    La ecuación fundamental de la contabilidad se cumple correctamente.
  </div>
  {% else %}
  <div class="alert-danger" style="margin-top: 20px">
    <i class="fas fa-exclamation-triangle"></i>
    <strong>Advertencia: Ecuación NO Balanceada</strong><br />
    Diferencia: ${{ reporte.diferencia|floatformat:2 }}
  </div>
  {% endif %}
</div>
{% endif %} {% endblock %}
