{% extends 'base.html' %} {% block title %}Balance de Comprobación{% endblock %}
{% block page_title %}Balance de Comprobación{% endblock %} {% block extra_css
%} {% include 'cuentas/reportes/_estilos_reporte.html' %}

<style>
  .tabla-reporte {
    background: white;
    border-radius: 12px;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.08);
    overflow: hidden;
  }

  .tabla-reporte table {
    width: 100%;
    border-collapse: collapse;
  }

  .tabla-reporte th {
    background: #f8f9fa;
    padding: 15px;
    text-align: left;
    font-weight: 600;
    color: #2c3e50;
    border-bottom: 2px solid #e9ecef;
  }

  .tabla-reporte td {
    padding: 12px 15px;
    border-bottom: 1px solid #f0f0f0;
  }

  .tabla-reporte tr:hover {
    background: #f8f9fa;
  }

  .text-right {
    text-align: right;
  }

  .totales-row {
    background: #667eea !important;
    color: white !important;
    font-weight: 700;
  }

  .totales-row td {
    border-bottom: none !important;
  }
</style>
{% endblock %} {% block content %} {% include
'cuentas/reportes/_filtros_reporte.html' with btn_text='Generar Reporte' %} {%
if reporte %} {% include 'cuentas/reportes/_encabezado_reporte.html' with
titulo='Balance de Comprobación' %}

<div class="tabla-reporte">
  <table>
    <thead>
      <tr>
        <th scope="col">Código</th>
        <th scope="col">Cuenta</th>
        <th scope="col" class="text-right">Débitos</th>
        <th scope="col" class="text-right">Créditos</th>
        <th scope="col" class="text-right">Saldo Deudor</th>
        <th scope="col" class="text-right">Saldo Acreedor</th>
      </tr>
    </thead>
    <tbody>
      {% for cuenta in reporte.cuentas %}
      <tr>
        <td>{{ cuenta.codigo }}</td>
        <td>{{ cuenta.nombre }}</td>
        <td class="text-right">${{ cuenta.debito|floatformat:2 }}</td>
        <td class="text-right">${{ cuenta.credito|floatformat:2 }}</td>
        <td class="text-right">${{ cuenta.saldo_deudor|floatformat:2 }}</td>
        <td class="text-right">${{ cuenta.saldo_acreedor|floatformat:2 }}</td>
      </tr>
      {% empty %}
      <tr>
        <td
          colspan="6"
          style="text-align: center; padding: 30px; color: #7f8c8d"
        >
          No hay movimientos en el período seleccionado
        </td>
      </tr>
      {% endfor %} {% if reporte.cuentas %}
      <tr class="totales-row">
        <td colspan="2"><strong>TOTALES</strong></td>
        <td class="text-right">
          <strong>${{ reporte.totales.debitos|floatformat:2 }}</strong>
        </td>
        <td class="text-right">
          <strong>${{ reporte.totales.creditos|floatformat:2 }}</strong>
        </td>
        <td class="text-right">
          <strong>${{ reporte.totales.saldo_deudor|floatformat:2 }}</strong>
        </td>
        <td class="text-right">
          <strong>${{ reporte.totales.saldo_acreedor|floatformat:2 }}</strong>
        </td>
      </tr>
      {% endif %}
    </tbody>
  </table>
</div>

{% if reporte.esta_balanceado %}
<div class="alert-success">
  <i class="fas fa-check-circle"></i> <strong>Balance Correcto:</strong> Los
  débitos y créditos están balanceados.
</div>
{% else %}
<div class="alert-danger">
  <i class="fas fa-exclamation-triangle"></i> <strong>Advertencia:</strong> Los
  débitos y créditos NO están balanceados. Revise los asientos contables.
</div>
{% endif %} {% endif %} {% endblock %}
